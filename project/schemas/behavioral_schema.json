{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Behavioral Event Schema v1",
  "type": "object",
  "properties": {
    "event_type": { "type": "string", "const": "task_response" },
    "participant_id": { "type": "string" },
    "task_id": { "type": "string" },
    "timestamp": { "type": "string", "format": "date-time" },
    "metrics": {
      "type": "object",
      "properties": {
        "response_time_ms": { "type": "integer", "minimum": 0 },
        "accuracy": { "type": "integer", "minimum": 0, "maximum": 1 },
        "retries": { "type": "integer", "minimum": 0 },
        "hint_used": { "type": "boolean" },
        "cursor_idle_ms": { "type": "integer", "minimum": 0 },
        "error_type": { "type": ["string", "null"] }
      },
      "required": ["response_time_ms", "accuracy"]
    },
    "session_context": {
      "type": "object",
      "properties": {
        "device": { "type": "string" },
        "difficulty_level": { "type": "integer", "minimum": 1 }
      },
      "additionalProperties": true
    },
    "consent_version": { "type": "string" }
  },
  "required": ["event_type", "participant_id", "task_id", "metrics"],
  "additionalProperties": false
}
